!function(e){var t=[];e.loadListener=function(t){var i=function(e,t,i){e.click?window.setTimeout(function(){t.click(),e.after&&"function"==typeof e.after&&e.after($targets,i)},e.clickTimeout):e.after&&"function"==typeof e.after&&e.after($targets,i)},n=e.extend({scroll:!0,scrollSpeed:1e3,click:!0,clickTimeout:1200,timeout:2e3,before:!1,after:!1},t);window.setTimeout(function(){var t=window.location.hash;if(""===t)return!1;if($targets=e("a[href*="+t+"]"),0===$targets.length)return!1;if($target=$targets.eq(0),n.before&&"function"==typeof n.before&&n.before($targets,t),n.scroll){e(t);if(e(t).is(":visible"))i(n,$target,t);else{var a=e(window).height()/2|0;e("html,body").animate({scrollTop:$target.offset().top-a},n.scrollSpeed,function(){i(n,$target,t)})}}else i(n,$target,t)},n.timeout)},e.loadScript=function(i,n){if(-1==t.indexOf(i)){t.push(i);var a=e("<script>");a.attr({src:i,async:!0}).ready(function(){console.log(i),n()}),e("head").append(a)}else n()},e.fn.select=function(t,i){var n=e(this),a=n.length;if("object"==typeof t&&(t=n.index(t)),t=t||0,t=t<0?0:t,i=i||1,t+=i,i>=0)for(;t>=a;)t-=a;else for(;t<0;)t=a+t;return n.eq(t)},e.stripTags=function(e,t){return(t=t||!1)&&(e=e.replace(/<br[\s\/]*>\s*/gi,"\n")),e.replace(/<[^>]+>/gi,"")},e.fn.exists=function(){return 0!==e(this).length},e.fn.tabs=function(t){var i=this;return this.each(function(){var n=e(this),a=e.extend({speed:400,target:".item",selectClass:"selected",animate:"fade",init:!1,before:!1,after:!1},t,n.data()),s=n.attr("href"),r=e(s);if(!r.exists())return!0;r.is(":visible")&&n.addClass(a.selectClass),a.init&&"function"==typeof a.init&&a.init(n,r,a),n.on("click",function(t){var s=n.attr("href"),r=e(s);if(a.before&&"function"==typeof a.before){var o=a.before(n,r,a);if(void 0!==o)return o}t.preventDefault(),i.removeClass(a.selectClass),e(this).addClass(a.selectClass);var l=e(a.target).not(s).filter(":visible");"hide"==a.animate?l.hide(a.speed,function(){r.show(a.speed,function(){a.after&&"function"==typeof a.after&&a.after(n,r,a)})}):"fade"==a.animate?l.fadeOut(a.speed,function(){r.fadeIn(a.speed,function(){a.after&&"function"==typeof a.after&&a.after(n,r,a)})}):l.slideUp(a.speed,function(){r.slideDown(a.speed,function(){a.after&&"function"==typeof a.after&&a.after(n,r,a)})})})})},e.fn.toggleBlock=function(t){return _scroll=function(t,i){if(!i.scroll)return!1;e("html,body").animate({scrollTop:t.offset().top-i.scrollOffset},i.speed)},this.each(function(){var i=e(this),n=e.extend({speed:"normal",animate:"slide",once:!1,openedText:i.html(),closedText:i.html(),scroll:!0,scrollOffset:0,activeClass:"active"},t,i.data()),a=e(i.attr("href"));if(!a.exists)return!0;var s=i.attr("rel"),r=e("a[rel="+s+"]");if(r.exists()){var o=":eq(0)";r.hasClass(n.activeClass)&&(o="."+n.activeClass),r.not(o).each(function(){e(this).removeClass(n.activeClass);var t=e(e(this).attr("href"));t.is(":visible")&&t.hide()}),r.filter(o).addClass(n.activeClass)}else i.hasClass(n.activeClass)||a.hide();i.click(function(){return a.is(":visible")?("hide"==n.animate?a.hide(n.speed):"fade"==n.animate?a.fadeOut(n.speed):a.slideUp(n.speed),i.removeClass(n.activeClass),i.html(n.closedText)):(r.exists()&&r.not(i).removeClass(n.activeClass).each(function(){var t=e(this).attr("href");e(t).is(":visible")&&("hide"==n.animate?e(t).hide(n.speed):"fade"==n.animate?e(t).fadeOut(n.speed):e(t).slideUp(n.speed))}),"hide"==n.animate?a.show(n.speed,function(){_scroll(a,n)}):"fade"==n.animate?a.fadeIn(n.speed,function(){_scroll(a,n)}):a.slideDown(n.speed,function(){_scroll(a,n)}),n.once&&i.remove(),i.addClass(n.activeClass),i.html(n.openedText)),!1})})},e.fn.popup=function(t,i){return this.each(function(){var i=e(this),n=e.extend({close:".close",before:!1,after:!1},t),a=e.extend({inline:!0,fixed:!0,transition:"fade",closeButton:!0,maxHeight:"95%",className:"cbx_popupwin",onOpen:function(){n.before&&"function"==typeof n.before&&n.before(i)},onClosed:function(){n.after&&"function"==typeof n.after&&n.after(i)}},t);i.click(function(t){t.preventDefault();var i=e(this).attr("href");if(!e(i).exists())return window.alert("Форма с идентификатором "+i+" на странице отсуствует. Сообщите администратору!"),!1;var n=e(i).find(".close");if(a.closeButton=0===n.length,a.href=i,e.colorbox(a),0===n.length)return!0;n.click(function(){return e.colorbox.close(),!1})})})},e.fn.submitForm=function(t,i){return openForm=function(t,i){if(0===e(t).length)return!1;i=e.extend({href:t,className:"cbx_popupwin",closeButton:!e(t).find(".close").exists()},i),e.colorbox(i)},this.each(function(){var n=e(this),a=e.extend({dataType:"json",okForm:"#popup_ok",errorClass:".errorMessage",errorForm:"#popup_error",returnSelector:".result",clearFields:!0,errorSelectClass:"error",errorDelay:3e3,success:!1,error:!1,speed:"normal",loadText:"Идет отправка данных..."},t,n.data()),s=e.extend({inline:!0,fixed:!0,transition:"fade"},i);n.bind("submit",function(t){t.preventDefault();var i=n.find("[type=submit]"),r=i.html();i.prop("disabled",!0),i.html(a.loadText);var o=new FormData;if(n.find("input[type=file]").each(function(){o.append(e(this).attr("name"),this.files[0])}),e.each(n.serializeArray(),function(){o.append(this.name,this.value)}),o.append("FSID",getCookie("FSID")),$err=n.find(a.errorClass),$errMess=$err,$err.exists())for(;$errMess.children().length>0;)$errMess=$errMess.children().filter(":first");return $err.hide(),$errMess.empty(),e.ajax({type:n.attr("method")||"post",url:n.attr("action")||"",data:o,processData:!1,contentType:!1,dataType:a.dataType,success:function(t){console.log(t),"success"==t.status?(a.success&&"function"==typeof a.success&&a.success(n,t),e(a.okForm).exists()?(e(a.okForm).find(a.returnSelector).html(t.message),openForm(a.okForm,s)):alert(e.stripTags(t.message,!0)),a.clearFields&&n.trigger("reset"),i.html(r),i.prop("disabled",!1)):(a.error&&"function"==typeof a.error&&a.error(n,t),n.find(t.input).not("[type=hidden]").exists()?e("html,body").animate({scrollTop:n.find(t.input).offset().top-200},a.speed,function(){var e=n.find(t.input).not("[type=hidden]"),i=e.data("focus");i&&(e=n.find("."+i)),e.addClass(a.errorSelectClass).focus(),$err.exists()&&($err.show(),$errMess.html(t.message)),window.setTimeout(function(){e.removeClass(a.errorSelectClass),$err.exists()&&($err.hide(),$errMess.empty())},a.errorDelay)}):$err.exists()?($err.exists()&&($err.show(),$errMess.html(t.message)),window.setTimeout(function(){n.find(t.input).removeClass(a.errorSelectClass),$err.exists()&&($err.hide(),$errMess.empty())},a.errorDelay)):e(a.errorForm).exists()?(e(a.errorForm).find(a.returnSelector).html(t.message),openForm(a.errorForm,s)):alert(e.stripTags(t.message,!0)),e.colorbox.resize(),i.html(r),i.prop("disabled",!1)),t.warning&&("object"==typeof t.warning?e.each(t.warning,function(e,t){console.warn(t)}):console.warn(t.warning))},error:function(t){a.error&&"function"==typeof a.error&&a.error(n,t),console.log(t);var o="";o=t.responseText?t.responseText:t.statusText,$err.exists()?($err.show(),$errMess.html(o),window.setTimeout(function(){$err.hide(),$errMess.empty()},a.errorDelay)):e(a.errorForm).exists()?(e(a.errorForm).find(a.returnSelector).html(o),openForm(a.errorForm,s)):alert(o),e.colorbox.resize(),i.html(r),i.prop("disabled",!1)}}),!1})})},e.fn.appendScroll=function(t){return this.each(function(){var i=e.extend({speed:1e3,debug:!0,deltaY:0},t);e(this).bind("click",function(){if(location.pathname.replace(/^\//,"")!=this.pathname.replace(/^\//,"")||location.hostname!=this.hostname)return i.debug&&console.warn("$.appendScroll: Link follow to other domen"),!0;var t=e(this.hash);return(t=t.length?t:e("[name="+this.hash.slice(1)+"]")).length?(e("html,body").animate({scrollTop:t.offset().top+i.deltaY},i.speed),!1):(i.debug&&console.warn("$.appendScroll: Target "+this.hash+" or [name="+this.hash.slice(1)+"] not found"),!0)})})},e.fn.fixedBlock=function(t){return init=function(t,i,n){e(document).scrollTop()>i?t.addClass(n.className):t.removeClass(n.className)},this.each(function(){var i=e.extend({deltaY:0,className:"fixed"},t),n=e(this),a=n.offset().top+i.deltaY;init(n,a,i),e(document).bind("scroll",function(){return init(n,a,i),!0})})},e.fn.slider=function(t){return this.each(function(){var i=e(this),n=i.parent().parent(),a=e.extend({prev:".prev",next:".next",dots:".dots",dot:".dot",speed:400},t),s=e.extend({items:3,startPosition:0,dotsContainer:n.find(a.dots)},i.data()),r=i.children().length;void 0===s.loop&&(s.loop=r>1),i.owlCarousel(s),n.find(a.prev).click(function(){return i.trigger("prev.owl.carousel",[a.speed]),!1}),n.find(a.next).click(function(){return i.trigger("next.owl.carousel",[a.speed]),!1}),n.find(a.dot).click(function(){return i.trigger("to.owl.carousel",[e(this).index(),a.speed]),!1})})},e.fn.vslider=function(t){return this.each(function(){var i=e(this),n=e.extend({items:3,step:1,prev:".prev",next:".next",full:".full",list:"ul"},t,i.data()),a=i.find(n.prev).add(i.find(n.next)),s=(i.find(n.full),i.find(n.list));i.data("index",0),a.click(function(){var t=0;if(e(this).is(n.prev)&&(t=1),e(this).is(n.next)&&(t=-1),0===t)return!1;var a=s.children(),r=a.eq(0).height(),o=a.length,l=r*o;s.height(l);var d=i.data("index");return(d+=t*r)>0&&(d=n.items*r-l),d<(n.items-o)*r&&(d=0),s.animate({top:d},"normal"),i.data("index",d),!1}),s.find("a").click(function(){var t=e(this).attr("href"),i=e(this).data("full");return e(n.full).attr("src",i),e(n.full).parent("a").attr("href",t),!1})})},e.isMobile=function(){mobile={Android:/Android/i.test(navigator.userAgent),BlackBerry:/BlackBerry/i.test(navigator.userAgent),iOS:/iPhone|iPad|iPod/i.test(navigator.userAgent),Opera:/Opera Mini/i.test(navigator.userAgent),Windows:/IEMobile/i.test(navigator.userAgent)};var t=!1;return e.each(mobile,function(e,i){if(i)return t=!0,!1}),t},e.fn.backgroundVideo=function(t){if(!e.isMobile())return this.each(function(){var i=e.extend({mp4:"video/bg.mp4",webm:"video/bg.webm",width:1920,ratio:"16:9",background:"#000",opacity:.6,offset:0,crop:!0},t);e(this).css({position:"relative"}).children().css({position:"relative",zIndex:1});var n=i.ratio.split(":"),a=Math.round(i.width/n[0]*n[1]),s=e(this).height(),r=e("<div>").css({position:"absolute",zIndex:0,top:i.offset,left:0,width:"100%",overflow:"hidden"});i.crop&&r.css({height:s});var o=e("<video>").attr({autoplay:"autoplay",loop:"loop",width:i.width,height:a}).css({position:"absolute",zIndex:0,top:0,left:"50%",marginLeft:-Math.round(i.width/2)}),l=e("<source>").attr({src:i.mp4,type:"video/mp4",media:"screen"}),d=e("<source>").attr({src:i.webm,type:"video/webm",media:"screen"}),c=e("<div>").css({background:i.background,opacity:i.opacity,width:i.width,height:a,position:"absolute",zIndex:1,top:0,left:0});o.append(l).append(d),r.append(o).append(c),e(this).append(r)})},e.fn.backgroundSlider=function(t){if(!e.isMobile())return this.each(function(){var i=e.extend({selector:"",speed:2e3,delay:5e3,index:0},t),n=e(this).children(i.selector);n.not(":eq(0)").fadeTo(1,0);var a=n.length;(i.index>a-1||i.index<0)&&(i.index=0),setInterval(function(){n.not(":eq("+i.index+")").fadeTo(i.speed,0),n.eq(i.index).fadeTo(i.speed,1),++i.index>=a&&(i.index=0)},i.delay)})},setCookie=function(e,t,i){var n=(i=i||{}).expires;if("number"==typeof n&&n){var a=new Date;a.setTime(a.getTime()+1e3*n),n=i.expires=a}n&&n.toUTCString&&(i.expires=n.toUTCString());var s=e+"="+(t=encodeURIComponent(t));for(var r in i){s+="; "+r;var o=i[r];!0!==o&&(s+="="+o)}document.cookie=s},getCookie=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},e.fn.onLeave=function(t){var i=e.extend({href:!1,expires:86400},t),n=!1;e(document).mouseleave(function(){getCookie("olflag")||n||(setCookie("olflag","1",{expires:i.expires}),n=!0,e.colorbox({href:i.href,inline:!0,fixed:!0,transition:"fade",closeButton:!1}))})},e.fn.videoLoad=function(t){var i={"www.youtube.com":{type:"youtube",re:/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,url:"https://www.youtube.com/embed/%id%?rel=0&showinfo=0&autoplay=1",scr:"https://img.youtube.com/vi/%id%/hqdefault.jpg",thumb:"https://img.youtube.com/vi/%id%/mqdefault.jpg"},"youtube.com":{type:"youtube",re:/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,url:"https://www.youtube.com/embed/%id%?rel=0&showinfo=0&autoplay=1",scr:"https://img.youtube.com/vi/%id%/hqdefault.jpg",thumb:"https://img.youtube.com/vi/%id%/mqdefault.jpg"},"youtu.be":{type:"youtube",re:/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,url:"https://www.youtube.com/embed/%id%?rel=0&showinfo=0&autoplay=1",scr:"https://img.youtube.com/vi/%id%/hqdefault.jpg",thumb:"https://img.youtube.com/vi/%id%/mqdefault.jpg"},"www.youtu.be":{type:"youtube",re:/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,url:"https://www.youtube.com/embed/%id%?rel=0&showinfo=0&autoplay=1",scr:"https://img.youtube.com/vi/%id%/hqdefault.jpg",thumb:"https://img.youtube.com/vi/%id%/mqdefault.jpg"}};return this.each(function(){var n=e.extend({realThumb:!0},t),a=i[e(this)[0].host];if(void 0===a)return!0;var s=e(this).attr("href").match(a.re)[1],r=a.url.replace("%id%",s),o=a.scr.replace("%id%",s),l=e(this).find("img");if(l.exists()||(l=e("<img>").attr({alt:""})),n.realThumb){l.attr("src",o);var d=e("<span>").css({display:"block",background:"url(/js/images/owl.video.play.png) no-repeat center center",position:"absolute",zIndex:0,width:"80px",height:"80px",top:"50%",left:"50%",marginTop:"-40px",marginLeft:"-40px"});e(this).css({display:"block",position:"relative"}).append(d)}e(this).on("click",function(t){t.preventDefault();var i=e("<iframe>").attr({src:r,allowfullscreen:!0});e(this).html(i)})})},e.fn.playlist=function(t){function i(t,i,a){return e("<a>").addClass(a.itemLinkClass).attr({href:t,target:"_blank"}).append(e("<img>").attr({src:i,alt:""}).addClass(a.screenClass)).append(e("<img>").attr({src:a.playImg,alt:"play"}).addClass(a.playClass)).click(function(t){t.preventDefault();var i=e(this).closest("."+a.itemClass),s=n(i.data("url"),a);i.addClass(a.playingClass).html(""),i.append(s)})}function n(t,i){return e("<iframe>").attr({src:t,allowfullscreen:!0})}var a={"www.youtube.com":{type:"youtube",re:/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,url:"https://www.youtube.com/embed/%id%?rel=0&showinfo=0&autoplay=1",scr:"https://img.youtube.com/vi/%id%/hqdefault.jpg",thumb:"https://img.youtube.com/vi/%id%/mqdefault.jpg"},"youtube.com":{type:"youtube",re:/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,url:"https://www.youtube.com/embed/%id%?rel=0&showinfo=0&autoplay=1",scr:"https://img.youtube.com/vi/%id%/hqdefault.jpg",thumb:"https://img.youtube.com/vi/%id%/mqdefault.jpg"},"youtu.be":{type:"youtube",re:/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,url:"https://www.youtube.com/embed/%id%?rel=0&showinfo=0&autoplay=1",scr:"https://img.youtube.com/vi/%id%/hqdefault.jpg",thumb:"https://img.youtube.com/vi/%id%/mqdefault.jpg"},"www.youtu.be":{type:"youtube",re:/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,url:"https://www.youtube.com/embed/%id%?rel=0&showinfo=0&autoplay=1",scr:"https://img.youtube.com/vi/%id%/hqdefault.jpg",thumb:"https://img.youtube.com/vi/%id%/mqdefault.jpg"}},s=this;return this.each(function(){var n=e(this),r=e.extend({itemSelector:"li",itemIgnore:".button",speed:300,click:!1,beforeClick:!1,afterClick:!1,play:!1,beforePlay:!1,afterPlay:!1,showThumb:!1,showMenuTitle:!0,playlistClass:"pl_container",menuClass:"pl_menu",menuTitleClass:"pl_menu_title",menuItemsClass:"pl_menu_items",menuItemClass:"pl_menu_item",menuLinkClass:"pl_menu_link",menuItemTitleClass:"pl_menu_item_title",menuItemThumbClass:"pl_menu_item_thumb",itemsClass:"pl_items",itemsWrapClass:"pl_items_wrap",itemClass:"pl_item",itemLinkClass:"pl_item_link",screenClass:"pl_screen",playClass:"pl_play",currentClass:"pl_current",playingClass:"pl_playing",playImg:"/images/play.png",menuTitleText:"Выбор видео:"},t,n.data()),o=e(s.selector).index(e(this)),l=s.selector;l=l.replace(/^\.|\#/gi,"").replace(/\s*\.|\s*\#|\s+|\>|\*/gi,"_")+"_"+o+"_";var d=e("<ul>").addClass(r.menuItemsClass),c=e("<div>").addClass(r.itemsWrapClass),u=0;n.find(r.itemSelector).each(function(){var t=e(this).find("a").not(r.itemIgnore),n=e(this).find(r.itemIgnore);0===n.length&&(n="");var s=a[t[0].host];if(void 0===s)return!0;var o=t.attr("href"),f=t.html(),p=o.match(s.re)[1],m=s.url.replace("%id%",p),h=s.scr.replace("%id%",p),v=s.thumb.replace("%id%",p),g="";0===u&&(g=r.currentClass),d.append(e("<li>").addClass(r.menuItemClass).append(e("<a>").addClass(r.menuLinkClass).addClass(g).attr({href:"#"+l+u}).append(e("<span>").addClass(r.menuItemTitleClass).append(f)).append(function(){return r.showThumb?e("<span>").addClass(r.menuItemThumbClass).append(e("<img>").attr({src:v,alt:""})):""}).click(function(t){t.preventDefault();var n=e(e(this).attr("href")),a=e(this).closest("."+r.playlistClass).find("."+r.itemsWrapClass),s=a.find("."+r.itemClass),o=s.height(),l=-s.index(n)*o,d=a.find("."+r.playingClass);d.removeClass(r.playingClass).empty().append(i(d.data("href"),d.data("scr"),r)),e(this).closest("."+r.menuClass).find("."+r.currentClass).removeClass(r.currentClass),e(this).addClass(r.currentClass),a.animate({top:l},r.speed)}))),c.append(e("<div>").addClass(r.itemClass).data({href:o,url:m,scr:h}).attr({id:l+u}).append(i(o,h,r)).append(n)),u++}),n.empty(),n.append(e("<div>").addClass(r.playlistClass).append(e("<div>").addClass(r.menuClass).append(r.showMenuTitle?e("<div>").addClass(r.menuTitleClass).html(r.menuTitleText):"").append(d)).append(e("<div>").addClass(r.itemsClass).append(c))),l++})},e.fn.formFields=function(t){var i=[];return this.each(function(){var t=e(this),n={action:t.attr("action")||"",method:t.attr("method")||"get",fields:{}};t.find("input,textarea,select").each(function(){if(void 0!==n.fields[e(this).attr("name")])return!0;var t={tag:e(this)[0].tagName.toLowerCase(),type:e(this).attr("type").toLowerCase()||"",name:e(this).attr("name"),value:"",options:[]};"select"==t.tag&&e(this).find("option").each(function(){t.options.push({text:e(this).text(),value:e(this).attr("value")})}),e(t.tag+"[name="+t.name+"]").each(function(){"checkbox"==t.type&&e(this).is(":checked"),t.value=e(this).val()}),n.fields[t.name]=t}),i.push(n)}),i},e.showgoals=function(t){var i=e.extend({active:!1,name:"goal",text:"goalname",target:"",console:!0,noduplicate:!1,constants:{goal_phone:"Клик по телефону",goal_email:"Клик по email"}},t),n=function(t){var i=[],n={};return e("form").each(function(){var a=e(this),s=a.closest("[id]"),r={type:"form",name:a.find("input[name="+t.name+"]").val()||"",text:a.find("input[name="+t.text+"]").val()||"",id:s.exists()?"#"+s.attr("id"):"",el:s.exists()?s:a,fields:a.formFields()[0].fields};t.noduplicate?void 0===n[r.name]&&(n[r.name]=!0,i.push(r)):i.push(r)}),e("a[data-"+t.name+"]").each(function(){var a=e(this),s={};if("#"==a.attr("href").substr(0,1)){var r=e(a.attr("href")).find("form");s={type:"link",name:a.data(t.name)||"",text:a.data(t.text)||a.text(),id:a.attr("href")||"",el:a,fields:r.exists()?r.formFields()[0].fields:[]}}else s={type:"link",name:a.data(t.name)||"",text:a.data(t.text)||a.text(),id:"",el:a,fields:[]};t.noduplicate?void 0===n[s.name]&&(n[s.name]=!0,void 0!==t.constants[s.name]&&(s.text=t.constants[s.name]),i.push(s)):i.push(s)}),i}(i);if(i.console&&console.info(n),i.target&&e(i.target).exists()){var a={table:e('<table border="1">').css({width:"600px",maxWidth:"100%",margin:"10px auto",textAlign:"left",background:"#fff",color:"#000",border:"1px solid #000",fontFamily:"sans serif",fontSize:"12px"}),row:e("<tr>"),num:e("<td>").addClass("num").css({width:"30px"}),goal:e("<td>").addClass("goal").css({width:"120px"}),name:e("<td>").addClass("name"),input:e('<input type="text">').css({width:"100%",border:"none",background:"#fff",color:"#000",fontFamily:"sans serif",fontSize:"12px"}).click(function(){e(this)[0].focus(),e(this)[0].select()})},s=a.table,r=a.row;r.append(a.num),r.append(a.goal.append(a.input.clone(!0))),r.append(a.name.append(a.input.clone(!0))),e(i.target).each(function(){var t=s.clone(!0);e.each(n,function(e,i){var n=r.clone(!0);n.find(".num").html(e+1),n.find(".goal input").val(i.name),n.find(".name input").val(i.text),t.append(n)}),e(this).append(t)})}},e.fn.toTop=function(t){function i(t,i){e(document).scrollTop()>=i.deltaY?t.addClass(i.className):t.removeClass(i.className)}return this.each(function(){var n=e.extend({speed:1e3,className:"fixed",deltaY:200},t),a=e(this);a.on("click",function(t){t.preventDefault(),e("html,body").animate({scrollTop:0},n.speed)}),i(a,n),e(document).bind("scroll",function(){return i(a,n),!0})})},e.fn.gotoForm=function(t){return this.each(function(){e.extend({},t);e(this).on("click",function(){var t=e(this);if(!t.attr("href"))return!0;var i=e(t.attr("href"));if(!i.exists())return!0;var n=t.data();if(e.each(n,function(t,n){"class"==t.substr(0,5)?(t=t.replace("class","").toLowerCase(),$element=i.find("."+t),$element.exists()&&$element.html(n)):"id"==t.substr(0,2)?(t=t.replace("id","").toLowerCase(),$element=i.find("#"+t),$element.exists()&&$element.html(n)):"name"==t.substr(0,4)?(t=t.replace("name","").toLowerCase(),$element=i.find('[name="'+t+'"]'),$element.exists()?$element.val(n):i.find("form").each(function(){var i=e('<input type="hidden">');i.attr({name:t}).val(n),e(this).append(i)})):"tag"==t.substr(0,3)?(t=t.replace("tag","").toLowerCase(),$element=i.find(t),$element.exists()&&$element.html(n)):(t=t.replace("class","").toLowerCase(),$element=i.find("."+t),$element.exists()&&$element.html(n))}),n.goal){var a=i.find("input").filter("[name=goal]");a.exists()&&a.val(n.goal)}if(n.goalname){var s=i.find("input").filter("[name=goalname]");s.exists()&&s.val(n.goalname)}return!1})})},e.fn.ymap=function(t){return this.each(function(){e.extend({},t);var i=e(this);ymaps.ready(function(){var t={center:[i.data("coordLat"),i.data("coordLon")],zoom:i.data("zoom")},n={hintContent:i.find(".address").text(),balloonContent:i.find(".balloon").html()},a={preset:i.data("dotType"),iconColor:i.data("dotColor")};i.html("");var s=new ymaps.Map(i[0],t),r=new ymaps.Placemark(t.center,n,a);s.geoObjects.add(r),s.behaviors.disable("scrollZoom"),e.isMobile()&&s.behaviors.disable("drag")})})},e.sendGoals=function(t){if(!t)return!1;"undefined"!=typeof yaCounters&&(e.each(yaCounters,function(e,i){ym(i,"reachGoal",t)}),console.info("send Yandex action: "+t)),"undefined"!=typeof GoogleAnalyticsObject&&"undefined"!=typeof gaCounters&&(e.each(gaCounters,function(e,i){ga(i+".send","event","form",t)}),console.info("send Google Analytics action: "+t))}}(jQuery);